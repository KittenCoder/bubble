<!DOCTYPE html>
<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script>
</head>

<body>

    <script>
        class Example extends Phaser.Scene {
            preload() {
                // this.load.setBaseURL('https://labs.phaser.io');

                // this.load.image('sky', 'assets/skies/space3.png');
                // this.load.image('logo', 'assets/sprites/phaser3-logo.png');
                // this.load.image('red', 'assets/particles/red.png');
                this.load.image('background', 'images/tile.jpg')
                this.load.image('logo', 'images/bubble.png');
                this.load.image('red', 'images/red.png');
            }

            create() {
                tileSprite = this.add.tileSprite(0, 0, 10000, 10000, 'background').setOrigin(0, 0);

                // Enable cursor keys for movement
                cursors = this.input.keyboard.createCursorKeys();

                // Set up the camera
                camera = this.cameras.main;
                camera.setBounds(0, 0, 10000, 10000); // Set the camera's boundaries to the size of the world

                // Enable cursor keys for camera movement
                cursors = this.input.keyboard.createCursorKeys();

                //this.add.image(400, 300, 'sky');

                const particles = this.add.particles(0, 0, 'red', {
                    speed: 100,
                    scale: { start: 1, end: 0 },
                    blendMode: 'ADD'
                });

                const logo = this.physics.add.image(400, 100, 'logo');

                logo.setVelocity(100, 200);
                logo.setBounce(1, 1);
                logo.setCollideWorldBounds(true);

                particles.startFollow(logo);
            }

            update() {
                const scrollSpeed = 10; // Adjust the camera movement speed as needed

                // Move the camera based on cursor input
                if (cursors.left.isDown) {
                    camera.scrollX -= scrollSpeed;
                }
                if (cursors.right.isDown) {
                    camera.scrollX += scrollSpeed;
                }
                if (cursors.up.isDown) {
                    camera.scrollY -= scrollSpeed;
                }
                if (cursors.down.isDown) {
                    camera.scrollY += scrollSpeed;
                }
            }
        }

        const config = {
            type: Phaser.AUTO,
            width: window.innerWidth,
            height: window.innerHeight,
            scale: {
                mode: Phaser.Scale.RESIZE, // Resize automatically to fit the window
                autoCenter: Phaser.Scale.CENTER_BOTH, // Center the game in the window
            },
            scene: Example,
            physics: {
                default: 'arcade',
                arcade: {
                    gravity: { y: 200 }
                }
            }
        };

        const game = new Phaser.Game(config);
    </script>

</body>

</html>